/*@preserve
 * Taggify - input tags creating library v1.0.0
 * https://github.com/sunpietro/taggify
 *
 * Copyright 2015-2017 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/taggify/blob/master/LICENSE
 *
 * Date: 2017-11-27T08:00Z
 */
!function(t,e,n){"use strict";"function"==typeof define&&define.amd?define("Taggify",n):"object"==typeof exports?exports=module.exports=n():t.Taggify=n()}(this,0,function(){"use strict";return function(t){var e,n,a,i=function(t,e){e(g(t))},l={containerSelector:".taggify",autocomplete:!1,autocompleteCallback:i,inputDelay:100,inputLabel:"Start typing ...",allowDuplicates:!1,hotKeys:[188,13]},o="taggify-"+Date.now(),r=document.createElement("input"),c=document.createElement("label"),u=document.createElement("div"),d=document.createElement("div"),s=[],p=window.hasOwnProperty("CustomEvent"),f=function(t){var e,a;p?(a={bubbles:!0,cancelable:!1},e=new CustomEvent(t,a)):(e=document.createEvent("CustomEvent"),e.initEvent(t,!1,!0)),n.dispatchEvent(e)},g=function(t){var e={};return t.split(",").map(function(t,e){return{id:e,label:t.trim()}}).filter(function(t){return l.allowDuplicates?!!t.label.length:!(!t.label.length||e[t.label])&&(e[t.label]=!0,t)})},m=function(t){var e,n=l.hotKeys.some(function(e){return(t.keyCode||t.which)===e});n&&(e=g(t.target.value),y(e))},v=function(t){window.clearTimeout(a),a=window.setTimeout(function(){l.autocomplete?l.autocompleteCallback(t.target.value,y):m(t)},l.inputDelay)},y=function(t){var e=document.createDocumentFragment(),n={};Array.isArray(t)&&(s.length&&(t=s.concat(t)),l.allowDuplicates||(t=t.filter(function(t){return!n[t.label]&&(n[t.label]=!0,!0)})),t.forEach(function(t){var n=document.createElement("div"),a=document.createElement("span"),i=document.createElement("button");a.classList.add("taggify__tag-label"),a.innerHTML=t.label,i.classList.add("taggify__btn--remove"),i.innerHTML="x",n.classList.add("taggify__tag"),n.dataset.tagText=t.label,n.dataset.tagId=t.id,n.appendChild(a),n.appendChild(i),e.appendChild(n)}),s=t,l.autocomplete?r.value="":(u.innerHTML="",r.value=t.map(function(t){return t.label}).join(", ")+", "),u.appendChild(e),f("tagsCreated"))},b=function(t,e){var n=t.parentNode;if(n)return e(t)?t:e(n)?n:b(n,e)},h=function(t){return t.classList&&t.classList.contains("taggify__tag")},L=function(t){return t.classList&&t.classList.contains("taggify__btn--remove")},_=function(t){var e,n=b(t.target,L),a="";n?(e=b(t.target,h),s=s.filter(function(t){return""+t.id!=""+e.dataset.tagId}),l.autocomplete||(a=s.map(function(t){return t.label}).join(", "),a=a.trim().length?a+", ":""),r.value=a,this.removeChild(e),f("tagRemoved")):f("tagNotRemoved")};for(e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);n=document.querySelector(l.containerSelector),n.innerHTML="",d.classList.add("taggify__wrapper"),c.for=o,c.innerHTML=l.inputLabel,c.setAttribute("for",o),c.classList.add("taggify__label"),r.id=o,r.type="text",r.classList.add("taggify__input"),u.classList.add("taggify__tags"),n.appendChild(d),n.appendChild(u),d.appendChild(c),d.appendChild(r),r.addEventListener("keyup",v,!1),u.addEventListener("click",_,!1)}});