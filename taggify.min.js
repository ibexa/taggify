(function(e,t){"use strict";e.Taggify=function(a){var n="taggify",l=n+"__wrapper",i=l+"__input",r=l+"__label",s=l+"__results",u=n+"__tags",c=u+"__tag",o=c+"__label",d=c+"__remove",f="."+n,p="div",m=188,h=13,b=function(e,t){t(e)},L={containerSelector:f,autocomplete:false,autocompleteCallback:b,inputDelay:100,inputLabel:"Start typing ...",allowDuplicates:false,hotKeys:[m,h]},g=n+"-"+Date.now(),v=t.createElement("input"),_=t.createElement("label"),y=t.createElement(p),C=t.createElement(p),w=t.createElement(p),E,T,D=[],k,H=function(e){var t={},a=L.hotKeys.some(function(t){return(e.keyCode||e.which)===t}),n;if(a){n=e.target.value.split(",").map(function(e,t){return{id:t,label:e.trim()}}).filter(function(e){if(!L.allowDuplicates){if(!e.label.length||t[e.label]){return false}t[e.label]=true;return e}else{return!!e.label.length}});S(n)}},M=function(t){e.clearTimeout(k);k=e.setTimeout(function(){if(L.autocomplete){L.autocompleteCallback(t.target.value,S)}else{H(t)}},L.inputDelay)},S=function(e){var a=t.createDocumentFragment(),n={};if(!Array.isArray(e)){return}if(D.length){e=D.concat(e)}if(!L.allowDuplicates){e=e.filter(function(e){if(n[e.label]){return false}n[e.label]=true;return true})}e.forEach(function(e){var n=t.createElement(p),l=t.createElement("span"),i=t.createElement("button");l.classList.add(o);l.innerHTML=e.label;i.classList.add(d);n.classList.add(c);n.dataset.tagText=e.label;n.dataset.tagId=e.id;n.appendChild(l);n.appendChild(i);a.appendChild(n)});D=e;if(!L.autocomplete){y.innerHTML="";v.value=e.map(function(e){return e.label}).join(", ")+", "}else{v.value=""}y.appendChild(a)},A=function(e,t){var a=e.parentNode;if(!a){return undefined}if(t(e)){return e}return t(a)?a:A(a,t)},j=function(e){return e.classList&&e.classList.contains(c)},x=function(e){return e.classList&&e.classList.contains(d)},I=function(e){var t=A(e.target,x),a="",n;if(t){n=A(e.target,j);D=D.filter(function(e){var t=""+e.id,a=""+n.dataset.tagId;return t!==a});if(!L.autocomplete){a=D.map(function(e){return e.label}).join(", ");a=a.trim().length?a+", ":""}v.value=a;this.removeChild(n)}};for(E in a){if(a.hasOwnProperty(E)){L[E]=a[E]}}T=t.querySelector(L.containerSelector);T.innerHTML="";w.classList.add(l);_.for=g;_.innerHTML=L.inputLabel;_.setAttribute("for",g);_.classList.add(r);v.id=g;v.type="text";v.classList.add(i);C.classList.add(s);y.classList.add(u);T.appendChild(w);T.appendChild(y);w.appendChild(_);w.appendChild(v);w.appendChild(C);v.addEventListener("keyup",M,false);y.addEventListener("click",I,false)}})(window,window.document);