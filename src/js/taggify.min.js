(function(e,t){"use strict";e.Taggify=function(a){var n="__label",l="taggify",i=l+"__wrapper",r=i+"__input",u=i+n,s=l+"__tags",o=s+"__tag",c=o+n,d=o+"__remove",f="."+l,p="tagsCreated",m="tagRemoved",v="tagNotRemoved",b="div",g=", ",h=188,L=13,C=function(e,t){t(j(e))},E={containerSelector:f,autocomplete:false,autocompleteCallback:C,inputDelay:100,inputLabel:"Start typing ...",allowDuplicates:false,hotKeys:[h,L]},y=l+"-"+Date.now(),w=t.createElement("input"),_=t.createElement("label"),T=t.createElement(b),D=t.createElement(b),k,H,M=[],S,x=e.hasOwnProperty("CustomEvent"),A=function(e){var a,n;if(x){n={bubbles:true,cancelable:false};a=new CustomEvent(e,n)}else{a=t.createEvent("CustomEvent");a.initEvent(e,false,true)}H.dispatchEvent(a)},j=function(e){var t={};return e.split(",").map(function(e,t){return{id:t,label:e.trim()}}).filter(function(e){if(!E.allowDuplicates){if(!e.label.length||t[e.label]){return false}t[e.label]=true;return e}else{return!!e.label.length}})},I=function(e){var t=E.hotKeys.some(function(t){return(e.keyCode||e.which)===t}),a;if(t){a=j(e.target.value);N(a)}},K=function(t){e.clearTimeout(S);S=e.setTimeout(function(){if(E.autocomplete){E.autocompleteCallback(t.target.value,N)}else{I(t)}},E.inputDelay)},N=function(e){var a=t.createDocumentFragment(),n={};if(!Array.isArray(e)){return}if(M.length){e=M.concat(e)}if(!E.allowDuplicates){e=e.filter(function(e){if(n[e.label]){return false}n[e.label]=true;return true})}e.forEach(function(e){var n=t.createElement(b),l=t.createElement("span"),i=t.createElement("button");l.classList.add(c);l.innerHTML=e.label;i.classList.add(d);i.innerHTML="x";n.classList.add(o);n.dataset.tagText=e.label;n.dataset.tagId=e.id;n.appendChild(l);n.appendChild(i);a.appendChild(n)});M=e;if(!E.autocomplete){T.innerHTML="";w.value=e.map(function(e){return e.label}).join(g)+g}else{w.value=""}T.appendChild(a);A(p)},O=function(e,t){var a=e.parentNode;if(!a){return undefined}if(t(e)){return e}return t(a)?a:O(a,t)},P=function(e){return e.classList&&e.classList.contains(o)},R=function(e){return e.classList&&e.classList.contains(d)},q=function(e){var t=O(e.target,R),a="",n;if(t){n=O(e.target,P);M=M.filter(function(e){var t=""+e.id,a=""+n.dataset.tagId;return t!==a});if(!E.autocomplete){a=M.map(function(e){return e.label}).join(g);a=a.trim().length?a+g:""}w.value=a;this.removeChild(n);A(m)}else{A(v)}};for(k in a){if(a.hasOwnProperty(k)){E[k]=a[k]}}H=t.querySelector(E.containerSelector);H.innerHTML="";D.classList.add(i);_.for=y;_.innerHTML=E.inputLabel;_.setAttribute("for",y);_.classList.add(u);w.id=y;w.type="text";w.classList.add(r);T.classList.add(s);H.appendChild(D);H.appendChild(T);D.appendChild(_);D.appendChild(w);w.addEventListener("keyup",K,false);T.addEventListener("click",q,false)}})(window,window.document);