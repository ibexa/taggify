/*@preserve
 * Taggify - input tags creating library v1.0.0
 * https://github.com/sunpietro/taggify
 *
 * Copyright 2015-2017 Piotr Nalepa
 * http://blog.piotrnalepa.pl
 *
 * Released under the MIT license
 * https://github.com/sunpietro/taggify/blob/master/LICENSE
 *
 * Date: 2017-11-27T08:00Z
 */
!function(t,e,a){"use strict";"function"==typeof define&&define.amd?define("Taggify",a):"object"==typeof exports?exports=module.exports=a():t.Taggify=a()}(this,0,function(){"use strict";return function(t){var e,a,n,i=function(t,e){e(g(t))},l={containerNode:null,containerSelector:".taggify",autocomplete:!1,autocompleteCallback:i,inputDelay:100,inputLabel:"Start typing ...",allowDuplicates:!1,hotKeys:[188,13],displayLabel:!0,displayInputValues:!0},o="taggify-"+Date.now(),r=document.createElement("input"),u=document.createElement("label"),c=document.createElement("div"),s=document.createElement("div"),d=[],p=window.hasOwnProperty("CustomEvent"),f=function(t,e){var n,i;p?(i={bubbles:!0,cancelable:!1},e&&Object.keys(e).length&&(i.detail=e),n=new CustomEvent(t,i)):(n=document.createEvent("CustomEvent"),n.initEvent(t,!1,!0)),a.dispatchEvent(n)},g=function(t){var e={};return t.split(",").map(function(t){return{id:Math.floor(65536*(1+Math.random())).toString(16),label:t.trim()}}).filter(function(t){return l.allowDuplicates?!!t.label.length:!(!t.label.length||e[t.label])&&(e[t.label]=!0,t)})},m=function(t){var e,a=l.hotKeys.some(function(e){return(t.keyCode||t.which)===e});a&&(e=g(t.target.value),l.displayInputValues||(e=d.concat(e)),b(e))},y=function(t){window.clearTimeout(n),n=window.setTimeout(function(){l.autocomplete?l.autocompleteCallback(t.target.value,b):m(t)},l.inputDelay)},b=function(t){var e=document.createDocumentFragment(),a={};Array.isArray(t)&&(d.length&&(t=d.concat(t)),l.allowDuplicates||(t=t.filter(function(t){return!a[t.label]&&(a[t.label]=!0,!0)})),t.forEach(function(t){var a=document.createElement("div"),n=document.createElement("span"),i=document.createElement("button");n.classList.add("taggify__tag-label"),n.innerHTML=t.label,i.classList.add("taggify__btn--remove"),i.innerHTML="x",a.classList.add("taggify__tag"),a.dataset.tagText=t.label,a.dataset.tagId=t.id,a.appendChild(n),a.appendChild(i),e.appendChild(a)}),d=t,l.autocomplete?r.value="":(c.innerHTML="",l.displayInputValues?r.value=t.map(function(t){return t.label}).join(", ")+", ":r.value=""),c.appendChild(e),f("tagsCreated",{tags:d}))},v=function(t,e){var a=t.parentNode;if(a)return e(t)?t:e(a)?a:v(a,e)},h=function(t){return t.classList&&t.classList.contains("taggify__tag")},L=function(t){return t.classList&&t.classList.contains("taggify__btn--remove")},_=function(t){var e,a=v(t.target,L),n="";a?(e=v(t.target,h),d=d.filter(function(t){return""+t.id!=""+e.dataset.tagId}),l.autocomplete||(n=d.map(function(t){return t.label}).join(", "),n=n.trim().length?n+", ":""),l.displayInputValues&&(r.value=n),this.removeChild(e),f("tagRemoved",{tags:d})):f("tagNotRemoved")};for(e in t)t.hasOwnProperty(e)&&(l[e]=t[e]);return a=l.containerNode?l.containerNode:document.querySelector(l.containerSelector),a.innerHTML="",s.classList.add("taggify__wrapper"),r.id=o,r.type="text",r.classList.add("taggify__input"),c.classList.add("taggify__tags"),a.appendChild(s),a.appendChild(c),l.displayLabel&&(u.for=o,u.innerHTML=l.inputLabel,u.setAttribute("for",o),u.classList.add("taggify__label"),s.appendChild(u)),s.appendChild(r),r.addEventListener("keyup",y,!1),c.addEventListener("click",_,!1),{updateTags:function(t){return l.displayInputValues&&(r.value=t.map(function(t){return t.label}).join(", ")),b(t),this}}}});