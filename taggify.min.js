(function(e,t,a){"use strict";e.Taggify=function(a){var n="taggify",l=n+"__wrapper",i=l+"__input",r=i+"--empty",s=l+"__label",c=l+"__results",o=n+"__tags",u=o+"__tag",d=u+"__label",p=u+"__remove",f="."+n,m="."+u,g=188,h=13,L=function(e,t){t(e)},v={containerSelector:f,autocomplete:false,autocompleteCallback:L,inputDelay:100,inputPlaceholder:"Start typing ...",allowDuplicates:false},b=n+"-"+Date.now(),_=t.createElement("input"),w=t.createElement("label"),y=t.createElement("div"),C=t.createElement("div"),E=t.createElement("div"),T,k,D,H,M=function(e){var t={},a;if((e.keyCode||e.which)===g||(e.keyCode||e.which)===h){a=e.target.value.split(",").map(function(e,t){return{id:t,label:e.trim()}}).filter(function(e){if(!v.allowDuplicates){if(!e.label.length||t[e.label]){return false}t[e.label]=true;return e}else{return!!e.label.length}});e.target.value=a.map(function(e){return e.label}).join(", ")+", ";q(a)}},S=function(t){e.clearTimeout(H);H=e.setTimeout(function(){if(t.target.value.length&&t.target.classList.contains(r)){t.target.classList.remove(r)}else{t.target.classList.add(r)}if(v.autocomplete){v.autocompleteCallback(t.target.value,q)}else{M(t)}},v.inputDelay)},q=function(e){var a=t.createDocumentFragment();e.forEach(function(e){var n=t.createElement("div"),l=t.createElement("span"),i=t.createElement("button");l.classList.add(d);l.innerHTML=e.label;i.classList.add(p);n.classList.add(u);n.dataset.tagText=e.label;n.dataset.tagId=e.id;n.appendChild(l);n.appendChild(i);a.appendChild(n)});D=e;y.innerHTML="";y.appendChild(a)},x=function(e,t){var a=e.parentNode;if(!a){return undefined}if(t(e)){return e}return t(a)?a:x(a,t)},N=function(e){return e.classList&&e.classList.contains(u)},O=function(e){return e.classList&&e.classList.contains(p)},P=function(e){var t=x(e.target,O),a="",n;if(t){n=x(e.target,N);D=D.filter(function(e){var t=""+e.id,a=""+n.dataset.tagId;return t!==a});if(!v.autocomplete){a=D.map(function(e){return e.label}).join(", ")+", "}_.value=a;this.removeChild(n)}};for(T in a){if(a.hasOwnProperty(T)){v[T]=a[T]}}k=t.querySelector(v.containerSelector);k.innerHTML="";E.classList.add(l);w.for=b;w.innerHTML=v.inputPlaceholder;w.setAttribute("for",b);w.classList.add(s);_.id=b;_.type="text";_.classList.add(i);_.classList.add(r);C.classList.add(c);y.classList.add(o);k.appendChild(E);k.appendChild(y);E.appendChild(_);E.appendChild(w);E.appendChild(C);_.addEventListener("keyup",S,false);y.addEventListener("click",P,false)};new e.Taggify({autocomplete:true,autocompleteCallback:function(e,t){var a=new XMLHttpRequest,n=function(){if(a.readyState!==XMLHttpRequest.DONE){return}if(a.status===200){t(JSON.parse(a.responseText))}};e=e.split(",").map(function(e){return e.trim()});e=e[e.length-1];a.onreadystatechange=n;a.open("GET","http://localhost:3000/users?q="+e,true);a.send()}})})(window,window.document,window.console);